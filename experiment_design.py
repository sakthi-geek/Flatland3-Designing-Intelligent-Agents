import json

experiments = {
    "experiment_1": {"env_config": {"seed": 39, "width": 30, "height": 30, "grid_mode": False, "obs_type": "tree",
                                    "max_num_cities": 2, "max_rails_between_cities": 2,
                                    "max_rail_pairs_in_city": 2, "n_agents": 4, "env_setting": "single",
                                    "num_envs": 1, "n_agents_per_env": 4, "predictor": "shortest_path"},
                     "obs_params": {"max_tree_depth": 2, "observation_radius": 10, "max_path_depth": 20},
                    "agent": "DDDQN", "n_episodes": 4000, "checkpoint_save_freq": 100, "n_eval_episodes": 25,
                    "epsilon_start": 1.0, "epsilon_end": 0.01, "epsilon_decay": 0.99, "gamma": 0.99, "tau": 0.01,
                    "buffer_size": 100000, "batch_size": 64, "update_every": 8, "learning_rate": 0.5e-4,
                    "buffer_min_size": 0, "restore_replay_buffer": "", "save_replay_buffer": False,
                    "hidden_size": 128, "use_gpu": True, "render": True, "num_threads": 4,
                    "model_prefix": "exp_1_model_", "model_save_path": "./experiment_1/models/",
                    "checkpoint_prefix": "exp_1_checkpoint_", "checkpoint_save_path": "./experiment_1/checkpoints/",
                    "eval_freq": 100, "eval_save_path": "./experiment_1/eval/",
                    "eval_log_name": "eval_results.txt"
                                    },
    "experiment_2": {"env_config": {"seed": 39, "width": 30, "height": 30, "grid_mode": False, "obs_type": "tree",
                                    "max_num_cities": 2, "max_rails_between_cities": 2,
                                    "max_rail_pairs_in_city": 2, "n_agents": 4, "env_setting": "single",
                                    "num_envs": 1, "n_agents_per_env": 4, "predictor": "shortest_path"},
                     "obs_params": {"max_tree_depth": 3, "observation_radius": 10, "max_path_depth": 20},
                    "agent": "DDDQN", "n_episodes": 4000, "checkpoint_save_freq": 100, "n_eval_episodes": 25,
                    "epsilon_start": 1.0, "epsilon_end": 0.01, "epsilon_decay": 0.99, "gamma": 0.99, "tau": 0.01,
                    "buffer_size": 100000, "batch_size": 64, "update_every": 8, "learning_rate": 0.5e-4,
                    "buffer_min_size": 0, "restore_replay_buffer": "", "save_replay_buffer": False,
                    "hidden_size": 128, "use_gpu": True, "render": True, "num_threads": 4,
                    "model_prefix": "exp_1_model_", "model_save_path": "./experiment_1/models/",
                    "checkpoint_prefix": "exp_1_checkpoint_", "checkpoint_save_path": "./experiment_1/checkpoints/",
                    "eval_freq": 100, "eval_save_path": "./experiment_1/eval/",
                    "eval_log_name": "eval_results.txt"
                                    },
    "experiment_3": {"env_config": {"seed": 39, "width": 30, "height": 30, "grid_mode": False, "obs_type": "tree",
                                    "max_num_cities": 2, "max_rails_between_cities": 2,
                                    "max_rail_pairs_in_city": 2, "n_agents": 4, "env_setting": "single",
                                    "num_envs": 1, "n_agents_per_env": 4, "predictor": "shortest_path",
                                    "malfunction_params": {"malfunction_rate": 1 / 400, "min_duration": 15,
                                                           "max_duration": 50}},
                     "obs_params": {"max_tree_depth": 2, "observation_radius": 10, "max_path_depth": 20},
                     "agent": "DDDQN", "n_episodes": 4000, "checkpoint_save_freq": 100, "n_eval_episodes": 25,
                     "epsilon_start": 1.0, "epsilon_end": 0.01, "epsilon_decay": 0.99, "gamma": 0.99, "tau": 0.01,
                     "buffer_size": 100000, "batch_size": 64, "update_every": 8, "learning_rate": 0.5e-4,
                     "buffer_min_size": 0, "restore_replay_buffer": "", "save_replay_buffer": False,
                     "hidden_size": 128, "use_gpu": True, "render": False, "num_threads": 4,
                     "model_prefix": "exp_6_model_", "model_save_path": "./experiment_6/models/",
                     "checkpoint_prefix": "exp_6_checkpoint_", "checkpoint_save_path": "./experiment_6/checkpoints/",
                     "eval_freq": 100, "eval_save_path": "./experiment_6/eval/",
                     "eval_log_name": "eval_results.txt"
                     },
    "experiment_4": {"env_config": {"seed": 39, "width": 30, "height": 30, "grid_mode": False, "obs_type": "tree",
                                    "max_num_cities": 2, "max_rails_between_cities": 2,
                                    "max_rail_pairs_in_city": 2, "n_agents": 4, "env_setting": "single",
                                    "num_envs": 1, "n_agents_per_env": 4, "predictor": "shortest_path",
                                    "malfunction_params": {"malfunction_rate": 1 / 200, "min_duration": 15,
                                                           "max_duration": 50}},
                     "obs_params": {"max_tree_depth": 2, "observation_radius": 10, "max_path_depth": 20},
                     "agent": "DDDQN", "n_episodes": 4000, "checkpoint_save_freq": 100, "n_eval_episodes": 25,
                     "epsilon_start": 1.0, "epsilon_end": 0.01, "epsilon_decay": 0.99, "gamma": 0.99, "tau": 0.01,
                     "buffer_size": 100000, "batch_size": 64, "update_every": 8, "learning_rate": 0.5e-4,
                     "buffer_min_size": 0, "restore_replay_buffer": "", "save_replay_buffer": False,
                     "hidden_size": 128, "use_gpu": True, "render": False, "num_threads": 4,
                     "model_prefix": "exp_7_model_", "model_save_path": "./experiment_7/models/",
                     "checkpoint_prefix": "exp_7_checkpoint_", "checkpoint_save_path": "./experiment_7/checkpoints/",
                     "eval_freq": 100, "eval_save_path": "./experiment_7/eval/",
                     "eval_log_name": "eval_results.txt"
                     },
    "experiment_5": {"env_config": {"seed": 39, "width": 30, "height": 30, "grid_mode": False, "obs_type": "tree",
                                    "max_num_cities": 2, "max_rails_between_cities": 2,
                                    "max_rail_pairs_in_city": 2, "n_agents": 7, "env_setting": "single",
                                    "num_envs": 1, "n_agents_per_env": 7, "predictor": "shortest_path"},
                     "obs_params": {"max_tree_depth": 2, "observation_radius": 10, "max_path_depth": 20},
                    "agent": "DDDQN", "n_episodes": 4000, "checkpoint_save_freq": 100, "n_eval_episodes": 25,
                    "epsilon_start": 1.0, "epsilon_end": 0.01, "epsilon_decay": 0.99, "gamma": 0.99, "tau": 0.01,
                    "buffer_size": 100000, "batch_size": 64, "update_every": 8, "learning_rate": 0.5e-4,
                    "buffer_min_size": 0, "restore_replay_buffer": "", "save_replay_buffer": False,
                    "hidden_size": 128, "use_gpu": True, "render": False, "num_threads": 4,
                    "model_prefix": "exp_2_model_", "model_save_path": "./experiment_2/models/",
                    "checkpoint_prefix": "exp_2_checkpoint_", "checkpoint_save_path": "./experiment_2/checkpoints/",
                    "eval_freq": 100, "eval_save_path": "./experiment_2/eval/",
                    "eval_log_name": "eval_results.txt"
                                        },
    "experiment_6": {"env_config": {"seed": 39, "width": 30, "height": 30, "grid_mode": False, "obs_type": "tree",
                                     "max_num_cities": 2, "max_rails_between_cities": 2,
                                     "max_rail_pairs_in_city": 2, "n_agents": 10, "env_setting": "single",
                                     "num_envs": 1, "n_agents_per_env": 10, "predictor": "shortest_path"},
                     "obs_params": {"max_tree_depth": 2, "observation_radius": 10, "max_path_depth": 20},
                    "agent": "DDDQN", "n_episodes": 4000, "checkpoint_save_freq": 100, "n_eval_episodes": 25,
                    "epsilon_start": 1.0, "epsilon_end": 0.01, "epsilon_decay": 0.99, "gamma": 0.99, "tau": 0.01,
                    "buffer_size": 100000, "batch_size": 64, "update_every": 8, "learning_rate": 0.5e-4,
                    "buffer_min_size": 0, "restore_replay_buffer": "", "save_replay_buffer": False,
                    "hidden_size": 128, "use_gpu": True, "render": False, "num_threads": 4,
                    "model_prefix": "exp_3_model_", "model_save_path": "./experiment_3/models/",
                    "checkpoint_prefix": "exp_3_checkpoint_", "checkpoint_save_path": "./experiment_3/checkpoints/",
                    "eval_freq": 100, "eval_save_path": "./experiment_3/eval/",
                    "eval_log_name": "eval_results.txt"
                     },
    "experiment_7": {"env_config": {"seed": 39, "width": 35, "height": 35, "grid_mode": False, "obs_type": "tree",
                                     "max_num_cities": 4, "max_rails_between_cities": 2,
                                     "max_rail_pairs_in_city": 2, "n_agents": 10, "env_setting": "single",
                                     "num_envs": 1, "n_agents_per_env": 10, "predictor": "shortest_path"},
                     "obs_params": {"max_tree_depth": 2, "observation_radius": 10, "max_path_depth": 20},
                    "agent": "DDDQN", "n_episodes": 4000, "checkpoint_save_freq": 100, "n_eval_episodes": 25,
                    "epsilon_start": 1.0, "epsilon_end": 0.01, "epsilon_decay": 0.99, "gamma": 0.99, "tau": 0.01,
                    "buffer_size": 100000, "batch_size": 64, "update_every": 8, "learning_rate": 0.5e-4,
                    "buffer_min_size": 0, "restore_replay_buffer": "", "save_replay_buffer": False,
                    "hidden_size": 128, "use_gpu": True, "render": False, "num_threads": 4,
                    "model_prefix": "exp_4_model_", "model_save_path": "./experiment_4/models/",
                    "checkpoint_prefix": "exp_4_checkpoint_", "checkpoint_save_path": "./experiment_4/checkpoints/",
                    "eval_freq": 100, "eval_save_path": "./experiment_4/eval/",
                    "eval_log_name": "eval_results.txt"
                     },
    "experiment_8": {"env_config": {"seed": 39, "width": 35, "height": 35, "grid_mode": False, "obs_type": "tree",
                                    "max_num_cities": 4, "max_rails_between_cities": 4,
                                    "max_rail_pairs_in_city": 4, "n_agents": 10, "env_setting": "single",
                                    "num_envs": 1, "n_agents_per_env": 10, "predictor": "shortest_path"},
                     "obs_params": {"max_tree_depth": 2, "observation_radius": 10, "max_path_depth": 20},
                    "agent": "DDDQN", "n_episodes": 4000, "checkpoint_save_freq": 100, "n_eval_episodes": 25,
                    "epsilon_start": 1.0, "epsilon_end": 0.01, "epsilon_decay": 0.99, "gamma": 0.99, "tau": 0.01,
                    "buffer_size": 100000, "batch_size": 64, "update_every": 8, "learning_rate": 0.5e-4,
                    "buffer_min_size": 0, "restore_replay_buffer": "", "save_replay_buffer": False,
                    "hidden_size": 128, "use_gpu": True, "render": False, "num_threads": 4,
                    "model_prefix": "exp_5_model_", "model_save_path": "./experiment_5/models/",
                    "checkpoint_prefix": "exp_5_checkpoint_", "checkpoint_save_path": "./experiment_5/checkpoints/",
                    "eval_freq": 100, "eval_save_path": "./experiment_5/eval/",
                    "eval_log_name": "eval_results.txt"
                      },
    "experiment_9": {"env_config": {"seed": 39, "width": 30, "height": 30, "grid_mode": False, "obs_type": "tree",
                                    "max_num_cities": 2, "max_rails_between_cities": 2,
                                    "max_rail_pairs_in_city": 2, "n_agents": 4, "env_setting": "single",
                                    "num_envs": 1, "n_agents_per_env": 4, "predictor": "shortest_path"},
                     "obs_params": {"max_tree_depth": 3, "observation_radius": 20, "max_path_depth": 30},
                     "agent": "DDDQN", "n_episodes": 4000, "checkpoint_save_freq": 100, "n_eval_episodes": 25,
                     "epsilon_start": 1.0, "epsilon_end": 0.01, "epsilon_decay": 0.99, "gamma": 0.99, "tau": 0.01,
                     "buffer_size": 100000, "batch_size": 64, "update_every": 8, "learning_rate": 0.5e-4,
                     "buffer_min_size": 0, "restore_replay_buffer": "", "save_replay_buffer": False,
                     "hidden_size": 128, "use_gpu": True, "render": False, "num_threads": 4,
                     "model_prefix": "exp_5_model_", "model_save_path": "./experiment_5/models/",
                     "checkpoint_prefix": "exp_5_checkpoint_", "checkpoint_save_path": "./experiment_5/checkpoints/",
                     "eval_freq": 100, "eval_save_path": "./experiment_5/eval/",
                     "eval_log_name": "eval_results.txt"
                     }
}

# --- save the experiments to a json file ----------------
with open('flatland3_MARL_experiments.json', 'w') as fp:
    json.dump(experiments, fp, indent=4)
print("Experiments saved to {} file".format('flatland3_MARL_experiments.json'))
